# put common definitions in here

INCLUDEFOLDER=../include
OBJECTFOLDER=../bin/objects
LIBFOLDER=../bin/lib

#Compile
CC	= g++

#Compile Flags
CFLAGS = -Wall -o0 -fno-inline -g -std=c++11 -fpic -Wfatal-errors

#Compile shared Lib flags
CSHAREDFLAGS= -shared

#Shared lib linking flags
SHAREDLDFLAGS= -Wl,-rpath,$(LIBFOLDER)

#Header files
INCLUDES= -I $(INCLUDEFOLDER)

#Liberary folders
LFLAGS = -L $(LIBFOLDER)

#Liberary names
LIBS=

RM= rm -rf

MKDIR_P = mkdir -p

LINK = ln -fsv

all: $(OBJS)
	@echo "Compiling all object files for this dir!"
	@echo $(OBJS)

debug: $(OBJS) $(DOBJS)
	@echo "Creating executable for debug purposes"
	$(CC) $(CFLAGS) $(INCLUDES) -o $(DEBUG) $(OBJS) $(DOBJS) $(LFLAGS) $(LIBS)

shared: $(OBJS)
	@echo "creating shared object lib for actuators"
	$(CC) $(CFLAGS) $(INCLUDES) -shared -o lib$(MAIN).so $(OBJS)  $(LFLAGS) $(LIBS)
	cd $(LIBFOLDER); $(LINK) $(CURRENTPATHFROMLIBFOLDER)/lib$(MAIN).so

clean: 
	$(RM) *.o
	$(RM) *.so
	$(RM) *$(MAIN)*
	$(RM) $(DEBUG)
	$(RM) $(addprefix $(OBJECTFOLDER),$(OBJS))
	$(RM) $(addprefix $(LIBFOLDER),*$(MAIN)*)

.cpp.o:
	$(CC) $(CFLAGS) $(INCLUDES) -c $<  -o $@
	$(LINK) $@ $(OBJECTFOLDER)$@
  
depend: $(SRCS)
	makedepend $(INCLUDES) $^

