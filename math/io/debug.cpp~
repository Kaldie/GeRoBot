#include <macroHeader.h>
#include <TraceListIO.h>

int main() {
  TraceListIO traceListIO("tmp.xml");
  traceListIO.build();
  for (auto pointer : traceListIO.getVector()) {
    LOG_DEBUG("StartPoint x: " << pointer->getStartPoint().x <<
              "StartPoint y: " << pointer->getStartPoint().y);
    LOG_DEBUG("EndPoint x:" << pointer->getEndPoint().x <<
              "EndtPoint y:" << pointer->getEndPoint().y);
    RotationTracePointer rPtr = std::dynamic_pointer_cast<RotationTrace>(pointer);
    if (rPtr) {
      Point2D point = rPtr->getArc().getCircle2D().getCentrePoint();
      LOG_DEBUG("Central point is: " << point.x << " , " << point.y);
    }
  }
  TracePointerVector vector = traceListIO.getVector();
  vector.push_back(vector[1]);
  traceListIO.update(vector);
  traceListIO.store("Yay.xml");
  vector.pop_back();
  vector.pop_back();
  LOG_INFO("Size of the vector: " << vector.size());
  traceListIO.update(vector);
  traceListIO.store("Yay2.xml");
}
